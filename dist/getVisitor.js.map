{"version":3,"sources":["getVisitor.js"],"names":["getVisitor","node","parent","ctx","ramdaFns","indexOf","name","rowLoc","source","start","charLoc","ramdaImportFns","push","debug","callExpression","identifier","wrapperId","literal","file","emitError"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,IAAMA,aAAa,SAAbA,UAAa;AAAA,SAAO,UAACC,IAAD,EAAOC,MAAP,EAAkB;;AAE1C,QAAI,CAAC,CAAD,KAAOC,IAAIC,QAAJ,CAAaC,OAAb,CAAqBJ,KAAKK,IAA1B,CAAX,EAA4C;AAC1C,UAAIC,SAAS,qBAAMJ,IAAIK,MAAV,EAAkBP,KAAKQ,KAAvB,CAAb;AACA,UAAIC,UAAU,sBAAOP,IAAIK,MAAX,EAAmBP,KAAKQ,KAAxB,CAAd;;AAEA,UAAI,4BAAaR,IAAb,EAAmBC,MAAnB,CAAJ,EAAgC;;AAE9B,YAAI,CAAC,CAAD,KAAOC,IAAIQ,cAAJ,CAAmBN,OAAnB,CAA2BJ,KAAKK,IAAhC,CAAX,EAAkD;AAChDH,cAAIQ,cAAJ,CAAmBC,IAAnB,CAAwBX,KAAKK,IAA7B;AACD;;AAED,YAAIH,IAAIU,KAAJ,KAAc,IAAd,IAAsB,SAASZ,KAAKK,IAAxC,EAA8C;AAC5C,iBAAO,mBAAEQ,cAAF,CAAiB,mBAAEC,UAAF,CAAaZ,IAAIa,SAAjB,CAAjB,EAA8C,CACnD,mBAAEC,OAAF,CAAUd,IAAIe,IAAd,CADmD,EAEnD,mBAAED,OAAF,CAAUV,MAAV,CAFmD,EAGnD,mBAAEU,OAAF,CAAUP,OAAV,CAHmD,EAInD,mBAAEO,OAAF,CAAUhB,KAAKK,IAAf,CAJmD,EAKnD,mBAAES,UAAF,CAAad,KAAKK,IAAlB,CALmD,CAA9C,CAAP;AAOD;AACF,OAfD,MAeO,IAAI,6BAAcL,IAAd,EAAoBC,MAApB,CAAJ,EAAiC;AACtCC,YAAIgB,SAAJ,CAAc,8BAAehB,GAAf,EAAoBI,MAApB,EAA4BG,OAA5B,EAAqCT,KAAKK,IAA1C,CAAd;AACD;AACF;;AAED,WAAOL,IAAP;AACD,GA3BkB;AAAA,CAAnB;;kBA6BeD,U","file":"getVisitor.js","sourcesContent":["import rowAt from './rowAt'\nimport charAt from './charAt'\nimport isIdentifier from './isIdentifier'\nimport isDeclaration from './isDeclaration'\nimport redeclareError from './redeclareError'\nimport { builders as b } from 'ast-types'\n\nconst getVisitor = ctx => (node, parent) => {\n\n  if (-1 !== ctx.ramdaFns.indexOf(node.name)) {\n    let rowLoc = rowAt(ctx.source, node.start)\n    let charLoc = charAt(ctx.source, node.start)\n\n    if (isIdentifier(node, parent)) {\n\n      if (-1 === ctx.ramdaImportFns.indexOf(node.name)) {\n        ctx.ramdaImportFns.push(node.name)\n      }\n\n      if (ctx.debug === true && '__' !== node.name) {\n        return b.callExpression(b.identifier(ctx.wrapperId), [\n          b.literal(ctx.file),\n          b.literal(rowLoc),\n          b.literal(charLoc),\n          b.literal(node.name),\n          b.identifier(node.name)\n        ])\n      }\n    } else if (isDeclaration(node, parent)) {\n      ctx.emitError(redeclareError(ctx, rowLoc, charLoc, node.name))\n    }\n  }\n\n  return node\n}\n\nexport default getVisitor\n"]}